<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather API intergration</title>
</head>

<body>
    <div id="empty"></div>
    <script>
            
        var container = document.createElement("div")
        container.style.width = "100%"
        container.style.display = "flex"
        container.style.flexDirection = "row"
        container.style.flexWrap = "wrap"
        container.style.backgroundColor="#ffe6f2"
        

        fetch("https://restcountries.com/v3.1/all")
        .then(function(data){
            return data.json();
        })
        .then(function(dataObj){
            console.log(dataObj)
            
            //  cantainer.appendChild(mydiv);
             dataObj.forEach(function(element){
                var mydiv = document.createElement("div");
                mydiv.style.height = "300px"
            
                mydiv.style.width = "200px";
                mydiv.style.backgroundColor = "";
                
             
                mydiv.style.margin = "15px";
                mydiv.style.border ="5px solid #000";
            
                mydiv.style.position = "reletive"
                var box = document.createElement("img");
                box.style.height = "100px"
                box.style.width = "175px";
                box.setAttribute("src",element.flags.png);
                box.style.borderColor = "1px solid black";
                box.style.padding = "8px";
                box.style.border = "5px solid #000";

                mydiv.appendChild(box);

                var value = document.createElement("div");
                value.style.width = "100px";
                value.style.height = "40px";
                value.style.margin = "1px";
                value.style.padding = "5px";
                value.style.color = "red";
                value.style.fontWeight = "1000";
                value.style.fontFamily = "Fantasy";
                value.innerText = element.name.common;
                 
                mydiv.appendChild(value);

                var car = document.createElement("div");
                car.style.width = "100px";
                car.style.height = "20px";
                car.style.marginLeft = "1px";
                car.style.padding = "5px";
                car.style.color="blue";
                car.style.fontWeight ="500";
                car.style.fontFamily = "Cursive";
                car.innerText = element.car.signs;
               
                mydiv.appendChild(car);
                var button = document.createElement('button')
                button.style.width = "150px";
                button.style.height = "40px";
                button.style.margin = "10px";
                button.style.position = "absolte";
                button.style.marginTop = "10px";
                button.innerText = "Get Weather";
                button.style.backgroundColor = "#0366fc";
                button.style.fontSize = "20px";
                button.style.fontFamily = "Fantasy";
                button.addEventListener('click',function(){
                    fetch('https://api.openweathermap.org/data/2.5/weather?q='+ value.innerText +'&appid=000fa418134cb6c08f816f68ff1ddb4c')
                    .then(data => alert(value.innerText+JSON.stringify(data.main)))
                
                    .then(function(dataobj1){
                        console.log(dataobj1);
                    })
                    

                    var popup = document.createElement("div");
                    popup.style.backgroundColor="#03fcc2";
                    popup.style.width="400px";
                    popup.style.height="500px";
                    popup.style.position="fixed";
                    popup.style.left="40%";
                    popup.style.top="80px";
                    popup.style.borderRadius="25px"
                    popup.style.borderBlockColor="black"
                    var name=document.createElement("h3")
                    name.innerText= value.innerText;
                    name.style.textAlign="center"
                    popup.appendChild(name)
                    
                    

                  var popbutton = document.createElement("button");
                  popbutton.style.backgroundColor="#03fcc2";
                  popbutton.style.width="30px";
                  popbutton.style.height="40px";
                  popbutton.style.fontSize = "x";
                  popbutton.style.position="fixed"
                  popbutton.style.marginTop="1%";
                  popbutton.style.padding = "10"
                  popbutton.innerText="X"
                  popbutton.style.borderRadius="25px"
                  popbutton.addEventListener("click",function(){
                  popup.style.display = 'none';
                 })
                  popup.appendChild(popbutton)
                  empty.appendChild(popup)
                });
               car.appendChild(button) 

                container.appendChild(mydiv)
             })

    
             document.body.appendChild(container);
        })
        

           
        .catch(function(err){
            console.log(err);
        })
    </script>
</body>
</html>
   
<!-- .then(data => alert(value.innerText+JSON.stringify(data.main))) -->